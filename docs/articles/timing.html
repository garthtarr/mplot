<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Timing considerations • mplot</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Timing considerations">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Theory
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/background.html">Background and philosophy</a>
    </li>
    <li>
      <a href="../articles/vip.html">Variable inclusion plots</a>
    </li>
    <li>
      <a href="../articles/msp.html">Model stability plots</a>
    </li>
    <li>
      <a href="../articles/af.html">Adaptive fence</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Applications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/publications.html">Publications</a>
    </li>
    <li>
      <a href="../articles/diabetes.html">Diabetes</a>
    </li>
    <li>
      <a href="../articles/birthweight.html">Birth weight</a>
    </li>
    <li>
      <a href="../articles/artificial.html">Artificial example</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tips
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/interactive.html">Interactive plots</a>
    </li>
    <li>
      <a href="../articles/timing.html">Timing</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/garthtarr/mplot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/people.html">
    <span class="fa fa-info-circle fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Timing considerations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/garthtarr/mplot/blob/master/vignettes/timing.Rmd"><code>vignettes/timing.Rmd</code></a></small>
      <div class="hidden name"><code>timing.Rmd</code></div>

    </div>

    
    
<style>
#example{
    display:flex;
    flex-wrap:nowrap;
}

#example span img
{
    width:50%;
    min-width: 345px;
}
</style>
<p>Any bootstrap model selection procedure is time consuming. However, for linear models, we have leveraged the efficiency of the branch-and-bound algorithm provided by <strong>leaps</strong> <span class="citation">(Lumley &amp; Miller, 2009; Miller, 2002)</span>. The <strong>bestglm</strong> package is used for GLMs; but in the absence of a comparably efficient algorithm the computational burden is much greater <span class="citation">(McLeod &amp; Xu, 2014)</span>.</p>
<p>Furthermore, we have taken advantage of the embarrassingly parallel nature of bootstrapping, utilising the <a href="https://cran.r-project.org/package=doParallel"><strong>doParallel</strong></a> and <a href="https://cran.r-project.org/package=foreach"><strong>foreach</strong></a> packages to provide cross platform multicore support, available through the <code>cores</code> argument. By default it will detect the number of cores available on your computer and leave one free.</p>
<p>Figure  shows the timing results of simulations run for standard use scenarios with 4, 8 or 16 cores used in parallel. Each observation plotted is the average of four runs of a given model size. The simulated models had a sample size of <span class="math inline">\(n=100\)</span> with <span class="math inline">\(5,10,\ldots,50\)</span> candidate variables, of which 30% were active in the true model.</p>
<p>The results show both the <code><a href="../reference/vis.html">vis()</a></code> and <code><a href="../reference/af.html">af()</a></code> functions are quite feasible on standard desktop hardware with 4 cores even for moderate dimensions of up to 40 candidate variables. The adaptive fence takes longer than the <code><a href="../reference/vis.html">vis()</a></code> function, though this is to be expected as the effective number of bootstrap replications is <code>B</code><span class="math inline">\(\times\)</span><code>n.c</code>, where <code>n.c</code> is the number divisions in the grid of the parameter <span class="math inline">\(c\)</span>.</p>
<p>The results for GLMs are far less impressive, even when the maximum dimension of a candidate solution is set to <code>nvmax = 10</code>. In its current implementation, the adaptive fence is only really feasible for models of around 10 predictors and the <code><a href="../reference/vis.html">vis()</a></code> function for 15. Future improvements could see approximations of the type outlined by  to bring the power of the linear model branch-and-bound algorithm to GLMs. An example of how this works in practice is given in Section .</p>
<p>An alternative approach for high dimensional models would be to consider subset selection with convex relaxations as in  or combine bootstrap model selection with regularisation. In particular, we have implemented variable inclusion plots and model stability plots for <strong>glmnet</strong> <span class="citation">(Shen et al., 2012)</span>. In general, this is very fast for models of moderate dimension, but it does not consider the full model space. Restrictions within the <strong>glmnet</strong> package, mean it is only applicable to linear models, binomial logistic regression, and Poisson regression with the log link function. The <strong>glmnet</strong> package also allows for <code>"multinomial"</code>, <code>"cox"</code>, and <code>"mgaussian"</code> families, though we have not yet incorporated these into the <strong>mplot</strong> package.</p>
<div id="example">
<p><span id="A"><img src="images/figure5a.png"></span><span id="B"><img src="images/figure5b.png"></span> <span id="C"><img src="images/figure5c.png"></span><span id="D"><img src="images/figure5d.png"></span></p>
</div>
<p><em>Average time required to run the <code><a href="../reference/af.html">af()</a></code> and <code><a href="../reference/vis.html">vis()</a></code> functions when <span class="math inline">\(n=100\)</span>. A binomial regression was used for the GLM example.</em></p>
<div id="references" class="section level4 unnumbered">
<h4 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h4>
<div id="refs" class="references">
<div id="ref-Lumley:2009">
<p>Lumley, T., &amp; Miller, A. (2009). <em>leaps: Regression subset selection</em>. <a href="https://cran.r-project.org/package=leaps">https://cran.r-project.org/package=leaps</a></p>
</div>
<div id="ref-McLeod:2014">
<p>McLeod, A. I., &amp; Xu, C. (2014). <em>bestglm: Best subset glm</em>. <a href="https://cran.r-project.org/package=bestglm">https://cran.r-project.org/package=bestglm</a></p>
</div>
<div id="ref-Miller:2002">
<p>Miller, A. (2002). <em>Subset selection in regression</em>. Boca Raton: Chapman &amp; Hall.</p>
</div>
<div id="ref-Shen:2012">
<p>Shen, X., Pan, W., &amp; Zhu, Y. (2012). Likelihood-based selection and sharp parameter estimation. <em>Journal of the American Statistical Association</em>, 107(497), 223–232. DOI:<a href="https://doi.org/10.1080/01621459.2011.645783">10.1080/01621459.2011.645783</a></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Garth Tarr, Samuel Mueller, Alan H Welsh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
